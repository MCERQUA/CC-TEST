<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} | {{ site.name }}</title>
    <meta name="description" content="{{ description or site.tagline }}">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Enhanced Animated Background with Grid Lines and More Particles -->
    <div class="animated-bg">
        <div class="grid-lines"></div>
        <div class="particles">
            <!-- 24 particles for better random floating effect -->
            <div class="particle" style="left: 5%; animation-delay: 0s;"></div>
            <div class="particle" style="left: 12%; animation-delay: 2s;"></div>
            <div class="particle" style="left: 18%; animation-delay: 4s;"></div>
            <div class="particle" style="left: 25%; animation-delay: 6s;"></div>
            <div class="particle" style="left: 32%; animation-delay: 8s;"></div>
            <div class="particle" style="left: 38%; animation-delay: 10s;"></div>
            <div class="particle" style="left: 45%; animation-delay: 12s;"></div>
            <div class="particle" style="left: 52%; animation-delay: 14s;"></div>
            <div class="particle" style="left: 58%; animation-delay: 16s;"></div>
            <div class="particle" style="left: 65%; animation-delay: 18s;"></div>
            <div class="particle" style="left: 72%; animation-delay: 20s;"></div>
            <div class="particle" style="left: 78%; animation-delay: 22s;"></div>
            <div class="particle" style="left: 85%; animation-delay: 1s;"></div>
            <div class="particle" style="left: 92%; animation-delay: 3s;"></div>
            <div class="particle" style="left: 8%; animation-delay: 5s;"></div>
            <div class="particle" style="left: 15%; animation-delay: 7s;"></div>
            <div class="particle" style="left: 22%; animation-delay: 9s;"></div>
            <div class="particle" style="left: 28%; animation-delay: 11s;"></div>
            <div class="particle" style="left: 35%; animation-delay: 13s;"></div>
            <div class="particle" style="left: 42%; animation-delay: 15s;"></div>
            <div class="particle" style="left: 48%; animation-delay: 17s;"></div>
            <div class="particle" style="left: 55%; animation-delay: 19s;"></div>
            <div class="particle" style="left: 62%; animation-delay: 21s;"></div>
            <div class="particle" style="left: 68%; animation-delay: 23s;"></div>
        </div>
    </div>
    
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="/" aria-label="{{ site.name }} Home">
                        <img src="/Images/Insulation_Contractors_of_arizona_logo.webp" alt="{{ site.name }}" class="logo-img">
                    </a>
                </div>
                <nav class="main-nav" aria-label="Main navigation">
                    <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
                        <span class="hamburger"></span>
                        <span class="hamburger"></span>
                        <span class="hamburger"></span>
                    </button>
                    <ul class="nav-list">
                        <li><a href="/">Home</a></li>
                        <li><a href="/about/">About</a></li>
                        <li><a href="/services/">Services</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/contact/" class="cta-button">Get Quote</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        {{ content | safe }}
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>{{ site.name }}</h3>
                    <p>{{ site.tagline }}</p>
                </div>
                <div class="footer-section">
                    <h3>Contact Info</h3>
                    <p>{{ site.phone }}<br>
                    {{ site.email }}<br>
                    {{ site.address }}</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="/services/">Our Services</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/contact/">Get a Quote</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; {{ site.name }} {% set year = 2025 %}{{ year }}. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <script>
    // Add scrolled class to header on scroll
    window.addEventListener('scroll', function() {
        const header = document.querySelector('.site-header');
        if (window.scrollY > 50) {
            header.classList.add('scrolled');
        } else {
            header.classList.remove('scrolled');
        }
    });

    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const navList = document.querySelector('.nav-list');
        const header = document.querySelector('.site-header');
        
        if (mobileMenuToggle) {
            mobileMenuToggle.addEventListener('click', function() {
                const isOpen = navList.classList.contains('mobile-active');
                
                if (isOpen) {
                    navList.classList.remove('mobile-active');
                    mobileMenuToggle.classList.remove('active');
                    mobileMenuToggle.setAttribute('aria-expanded', 'false');
                    header.classList.remove('mobile-menu-open');
                } else {
                    navList.classList.add('mobile-active');
                    mobileMenuToggle.classList.add('active');
                    mobileMenuToggle.setAttribute('aria-expanded', 'true');
                    header.classList.add('mobile-menu-open');
                }
            });
        }
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.main-nav') && navList.classList.contains('mobile-active')) {
                navList.classList.remove('mobile-active');
                mobileMenuToggle.classList.remove('active');
                mobileMenuToggle.setAttribute('aria-expanded', 'false');
                header.classList.remove('mobile-menu-open');
            }
        });
        
        // Close mobile menu when clicking on a link
        const navLinks = document.querySelectorAll('.nav-list a');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                if (navList.classList.contains('mobile-active')) {
                    navList.classList.remove('mobile-active');
                    mobileMenuToggle.classList.remove('active');
                    mobileMenuToggle.setAttribute('aria-expanded', 'false');
                    header.classList.remove('mobile-menu-open');
                }
            });
        });
    });

    // Add data-text attributes to headings for subtle glow effect
    document.addEventListener('DOMContentLoaded', function() {
        const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
        headings.forEach(heading => {
            if (!heading.getAttribute('data-text')) {
                heading.setAttribute('data-text', heading.textContent);
            }
        });
    });
    
    // Enhanced accordion functionality
    document.addEventListener('DOMContentLoaded', function() {
        const accordionHeaders = document.querySelectorAll('.accordion-header');
        accordionHeaders.forEach(header => {
            header.addEventListener('click', function() {
                const item = this.closest('.accordion-item');
                const isActive = item.classList.contains('active');
                
                // Close all other accordion items
                document.querySelectorAll('.accordion-item').forEach(otherItem => {
                    if (otherItem !== item) {
                        otherItem.classList.remove('active');
                    }
                });
                
                // Toggle current item
                item.classList.toggle('active', !isActive);
            });
        });
    });

    // Enhanced tab functionality
    document.addEventListener('DOMContentLoaded', function() {
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs
                tabs.forEach(t => t.classList.remove('active'));
                // Add active class to clicked tab
                this.classList.add('active');
            });
        });
    });
    
    // Smooth scroll for anchor links
    document.addEventListener('DOMContentLoaded', function() {
        const links = document.querySelectorAll('a[href^="#"]');
        links.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    });
    </script>
</body>
</html>